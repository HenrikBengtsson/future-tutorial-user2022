<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Part 4 Errors and output | Tutorial: An Introduction to Futureverse for Parallel Processing in R</title>
  <meta name="description" content="N/A" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Part 4 Errors and output | Tutorial: An Introduction to Futureverse for Parallel Processing in R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://www.futureverse.org/figures/future_logo.png" />
  <meta property="og:description" content="N/A" />
  <meta name="github-repo" content="HenrikBengtsson/future-tutorial-useR2022" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Part 4 Errors and output | Tutorial: An Introduction to Futureverse for Parallel Processing in R" />
  
  <meta name="twitter:description" content="N/A" />
  <meta name="twitter:image" content="https://www.futureverse.org/figures/future_logo.png" />

<meta name="author" content="Henrik Bengtsson" />


<meta name="date" content="2022-06-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="map-reduce-apis.html"/>
<link rel="next" href="reporting-on-progress-updates.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Tutorial Overview</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#abstract"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#objectives"><i class="fa fa-check"></i>Objectives</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#preparing-for-this-tutorial"><i class="fa fa-check"></i>Preparing for this tutorial</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="hello-and-practicalities.html"><a href="hello-and-practicalities.html"><i class="fa fa-check"></i>Hello and practicalities</a>
<ul>
<li class="chapter" data-level="" data-path="hello-and-practicalities.html"><a href="hello-and-practicalities.html#practicalities"><i class="fa fa-check"></i>Practicalities</a></li>
<li class="chapter" data-level="" data-path="hello-and-practicalities.html"><a href="hello-and-practicalities.html#agenda"><i class="fa fa-check"></i>Agenda</a></li>
<li class="chapter" data-level="" data-path="hello-and-practicalities.html"><a href="hello-and-practicalities.html#polls"><i class="fa fa-check"></i>Polls</a>
<ul>
<li class="chapter" data-level="" data-path="hello-and-practicalities.html"><a href="hello-and-practicalities.html#poll-1-how-much-do-you-know-about-parallelization-in-r"><i class="fa fa-check"></i>Poll #1: How much do you know about parallelization in R?</a></li>
<li class="chapter" data-level="" data-path="hello-and-practicalities.html"><a href="hello-and-practicalities.html#poll-2-what-is-your-main-operating-system-when-using-r"><i class="fa fa-check"></i>Poll #2: What is your main operating system when using R?</a></li>
<li class="chapter" data-level="" data-path="hello-and-practicalities.html"><a href="hello-and-practicalities.html#poll-3-how-do-you-run-r"><i class="fa fa-check"></i>Poll #3: How do you run R?</a></li>
<li class="chapter" data-level="" data-path="hello-and-practicalities.html"><a href="hello-and-practicalities.html#poll-4-do-you-have-access-to-a-cluster"><i class="fa fa-check"></i>Poll #4: Do you have access to a cluster?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html"><i class="fa fa-check"></i><b>1</b> An Overview of The Futureverse</a>
<ul>
<li class="chapter" data-level="1.1" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#why-do-we-parallelize"><i class="fa fa-check"></i><b>1.1</b> Why do we parallelize?</a></li>
<li class="chapter" data-level="1.2" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#the-future-package-the-core-of-it-all"><i class="fa fa-check"></i><b>1.2</b> The future package (the core of it all)</a></li>
<li class="chapter" data-level="1.3" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#quick-intro-evaluate-r-in-the-background"><i class="fa fa-check"></i><b>1.3</b> Quick intro: Evaluate R in the background</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#sequentially"><i class="fa fa-check"></i><b>1.3.1</b> Sequentially</a></li>
<li class="chapter" data-level="1.3.2" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#in-parallel"><i class="fa fa-check"></i><b>1.3.2</b> In parallel</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#quick-intro-parallel-base-r-apply"><i class="fa fa-check"></i><b>1.4</b> Quick intro: Parallel base-R apply</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#sequentially-1"><i class="fa fa-check"></i><b>1.4.1</b> Sequentially</a></li>
<li class="chapter" data-level="1.4.2" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#in-parallel-1"><i class="fa fa-check"></i><b>1.4.2</b> In parallel</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#quick-intro-parallel-tidyverse-apply"><i class="fa fa-check"></i><b>1.5</b> Quick intro: Parallel tidyverse apply</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#sequentially-2"><i class="fa fa-check"></i><b>1.5.1</b> Sequentially</a></li>
<li class="chapter" data-level="1.5.2" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#in-parallel-2"><i class="fa fa-check"></i><b>1.5.2</b> In parallel</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#quick-intro-parallel-foreach"><i class="fa fa-check"></i><b>1.6</b> Quick intro: Parallel foreach</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#sequentially-3"><i class="fa fa-check"></i><b>1.6.1</b> Sequentially</a></li>
<li class="chapter" data-level="1.6.2" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#in-parallel-3"><i class="fa fa-check"></i><b>1.6.2</b> In parallel</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#what-is-the-futureverse"><i class="fa fa-check"></i><b>1.7</b> What is the Futureverse?</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#packages-part-of-the-futureverse"><i class="fa fa-check"></i><b>1.7.1</b> Packages part of the Futureverse</a></li>
<li class="chapter" data-level="1.7.2" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#who-is-it-for"><i class="fa fa-check"></i><b>1.7.2</b> Who is it for?</a></li>
<li class="chapter" data-level="1.7.3" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#who-are-using-it"><i class="fa fa-check"></i><b>1.7.3</b> Who are using it?</a></li>
<li class="chapter" data-level="1.7.4" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#what-about-its-quality-and-stability"><i class="fa fa-check"></i><b>1.7.4</b> What about its quality and stability?</a></li>
<li class="chapter" data-level="1.7.5" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#support"><i class="fa fa-check"></i><b>1.7.5</b> Support</a></li>
<li class="chapter" data-level="1.7.6" data-path="an-overview-of-the-futureverse.html"><a href="an-overview-of-the-futureverse.html#how-to-stay-up-to-date"><i class="fa fa-check"></i><b>1.7.6</b> How to stay up-to-date</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="the-core-future-api.html"><a href="the-core-future-api.html"><i class="fa fa-check"></i><b>2</b> The core Future API</a>
<ul>
<li class="chapter" data-level="2.1" data-path="the-core-future-api.html"><a href="the-core-future-api.html#three-atomic-building-blocks"><i class="fa fa-check"></i><b>2.1</b> Three atomic building blocks</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="the-core-future-api.html"><a href="the-core-future-api.html#mental-model-the-future-api-decouples-a-regular-r-assignment-into-two-parts"><i class="fa fa-check"></i><b>2.1.1</b> Mental model: The Future API decouples a regular R assignment into two parts</a></li>
<li class="chapter" data-level="2.1.2" data-path="the-core-future-api.html"><a href="the-core-future-api.html#keep-doing-other-things-while-waiting"><i class="fa fa-check"></i><b>2.1.2</b> Keep doing other things while waiting</a></li>
<li class="chapter" data-level="2.1.3" data-path="the-core-future-api.html"><a href="the-core-future-api.html#evaluate-several-things-in-parallel"><i class="fa fa-check"></i><b>2.1.3</b> Evaluate several things in parallel</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="the-core-future-api.html"><a href="the-core-future-api.html#choosing-parallel-backend"><i class="fa fa-check"></i><b>2.2</b> Choosing parallel backend</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="the-core-future-api.html"><a href="the-core-future-api.html#sequential-default"><i class="fa fa-check"></i><b>2.2.1</b> sequential (default)</a></li>
<li class="chapter" data-level="2.2.2" data-path="the-core-future-api.html"><a href="the-core-future-api.html#multisession-in-parallel-on-local-computer"><i class="fa fa-check"></i><b>2.2.2</b> multisession: in parallel on local computer</a></li>
<li class="chapter" data-level="2.2.3" data-path="the-core-future-api.html"><a href="the-core-future-api.html#cluster-in-parallel-on-multiple-computers"><i class="fa fa-check"></i><b>2.2.3</b> cluster: in parallel on multiple computers</a></li>
<li class="chapter" data-level="2.2.4" data-path="the-core-future-api.html"><a href="the-core-future-api.html#there-are-other-parallel-backends-and-more-to-come"><i class="fa fa-check"></i><b>2.2.4</b> There are other parallel backends and more to come</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="the-core-future-api.html"><a href="the-core-future-api.html#motto-and-design-philosophy"><i class="fa fa-check"></i><b>2.3</b> Motto and design philosophy</a></li>
<li class="chapter" data-level="2.4" data-path="the-core-future-api.html"><a href="the-core-future-api.html#demo-ggplot2-remotely"><i class="fa fa-check"></i><b>2.4</b> Demo: ggplot2 remotely</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="map-reduce-apis.html"><a href="map-reduce-apis.html"><i class="fa fa-check"></i><b>3</b> Map-reduce APIs</a>
<ul>
<li class="chapter" data-level="3.1" data-path="map-reduce-apis.html"><a href="map-reduce-apis.html#parallel-alternatives-to-base-r-apply-functions"><i class="fa fa-check"></i><b>3.1</b> Parallel alternatives to base-R apply functions</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="map-reduce-apis.html"><a href="map-reduce-apis.html#example-baselapplyx-fun"><i class="fa fa-check"></i><b>3.1.1</b> Example: base::lapply(X, FUN)</a></li>
<li class="chapter" data-level="3.1.2" data-path="map-reduce-apis.html"><a href="map-reduce-apis.html#example-basevapplyx-fun-fun.value"><i class="fa fa-check"></i><b>3.1.2</b> Example: base::vapply(X, FUN, FUN.VALUE)</a></li>
<li class="chapter" data-level="3.1.3" data-path="map-reduce-apis.html"><a href="map-reduce-apis.html#example-basemapplyx-y-fun"><i class="fa fa-check"></i><b>3.1.3</b> Example: base::mapply(X, Y, FUN)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="map-reduce-apis.html"><a href="map-reduce-apis.html#parallel-alternatives-to-purrr-functions"><i class="fa fa-check"></i><b>3.2</b> Parallel alternatives to purrr functions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="errors-and-output.html"><a href="errors-and-output.html"><i class="fa fa-check"></i><b>4</b> Errors and output</a>
<ul>
<li class="chapter" data-level="4.1" data-path="errors-and-output.html"><a href="errors-and-output.html#business-as-usual-exception-handling-dealing-with-errors"><i class="fa fa-check"></i><b>4.1</b> Business as usual: Exception handling (“dealing with errors”)</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="errors-and-output.html"><a href="errors-and-output.html#example-setup"><i class="fa fa-check"></i><b>4.1.1</b> Example setup</a></li>
<li class="chapter" data-level="4.1.2" data-path="errors-and-output.html"><a href="errors-and-output.html#exception-handling-works-the-same-with-map-reduce-functions"><i class="fa fa-check"></i><b>4.1.2</b> Exception handling works the same with map-reduce functions</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="errors-and-output.html"><a href="errors-and-output.html#business-as-usual-warnings"><i class="fa fa-check"></i><b>4.2</b> Business as usual: Warnings</a></li>
<li class="chapter" data-level="4.3" data-path="errors-and-output.html"><a href="errors-and-output.html#business-as-usual-messages"><i class="fa fa-check"></i><b>4.3</b> Business as usual: Messages</a></li>
<li class="chapter" data-level="4.4" data-path="errors-and-output.html"><a href="errors-and-output.html#business-as-usual-standard-output"><i class="fa fa-check"></i><b>4.4</b> Business as usual: Standard output</a></li>
<li class="chapter" data-level="4.5" data-path="errors-and-output.html"><a href="errors-and-output.html#summary-all-types-of-output-is-relayed"><i class="fa fa-check"></i><b>4.5</b> Summary: All types of output is relayed</a></li>
<li class="chapter" data-level="4.6" data-path="errors-and-output.html"><a href="errors-and-output.html#odds-and-ends"><i class="fa fa-check"></i><b>4.6</b> Odds and ends</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="errors-and-output.html"><a href="errors-and-output.html#what-about-standard-error-stderr"><i class="fa fa-check"></i><b>4.6.1</b> What about standard error (stderr)?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reporting-on-progress-updates.html"><a href="reporting-on-progress-updates.html"><i class="fa fa-check"></i><b>5</b> Reporting on progress updates</a>
<ul>
<li class="chapter" data-level="5.1" data-path="reporting-on-progress-updates.html"><a href="reporting-on-progress-updates.html#basic-progress-updates"><i class="fa fa-check"></i><b>5.1</b> Basic progress updates</a></li>
<li class="chapter" data-level="5.2" data-path="reporting-on-progress-updates.html"><a href="reporting-on-progress-updates.html#progress-updates-in-parallel"><i class="fa fa-check"></i><b>5.2</b> Progress updates in parallel</a></li>
<li class="chapter" data-level="5.3" data-path="reporting-on-progress-updates.html"><a href="reporting-on-progress-updates.html#customizing-how-progress-is-reported"><i class="fa fa-check"></i><b>5.3</b> Customizing how progress is reported</a></li>
<li class="chapter" data-level="5.4" data-path="reporting-on-progress-updates.html"><a href="reporting-on-progress-updates.html#demo-mandelbrot-sets"><i class="fa fa-check"></i><b>5.4</b> Demo: Mandelbrot sets</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="quick-summary-and-comparison-to-other-parallel-frameworks.html"><a href="quick-summary-and-comparison-to-other-parallel-frameworks.html"><i class="fa fa-check"></i><b>6</b> Quick summary and comparison to other parallel frameworks</a>
<ul>
<li class="chapter" data-level="6.1" data-path="quick-summary-and-comparison-to-other-parallel-frameworks.html"><a href="quick-summary-and-comparison-to-other-parallel-frameworks.html#feature-comparisons"><i class="fa fa-check"></i><b>6.1</b> Feature comparisons</a></li>
<li class="chapter" data-level="6.2" data-path="quick-summary-and-comparison-to-other-parallel-frameworks.html"><a href="quick-summary-and-comparison-to-other-parallel-frameworks.html#parallel-backend-comparisons"><i class="fa fa-check"></i><b>6.2</b> Parallel-backend comparisons</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="random-numbers-and-reproducibility.html"><a href="random-numbers-and-reproducibility.html"><i class="fa fa-check"></i><b>7</b> Random numbers and reproducibility</a>
<ul>
<li class="chapter" data-level="7.1" data-path="random-numbers-and-reproducibility.html"><a href="random-numbers-and-reproducibility.html#why-is-this-important"><i class="fa fa-check"></i><b>7.1</b> Why is this important?</a></li>
<li class="chapter" data-level="7.2" data-path="random-numbers-and-reproducibility.html"><a href="random-numbers-and-reproducibility.html#futures-use-proper-parallel-rng"><i class="fa fa-check"></i><b>7.2</b> Futures use proper parallel RNG</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="random-numbers-and-reproducibility.html"><a href="random-numbers-and-reproducibility.html#what-happens-if-you-forget-to-declare-seed-true"><i class="fa fa-check"></i><b>7.2.1</b> What happens if you forget to declare seed = TRUE?</a></li>
<li class="chapter" data-level="7.2.2" data-path="random-numbers-and-reproducibility.html"><a href="random-numbers-and-reproducibility.html#random-numbers-with-parallel-map-reduce-functions"><i class="fa fa-check"></i><b>7.2.2</b> Random numbers with parallel map-reduce functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="open-discussion.html"><a href="open-discussion.html"><i class="fa fa-check"></i>Open discussion</a></li>
<li class="chapter" data-level="8" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>8</b> Appendix</a>
<ul>
<li class="chapter" data-level="8.1" data-path="appendix.html"><a href="appendix.html#appendix-exception-handling-by-other-parallel-map-reduce-apis"><i class="fa fa-check"></i><b>8.1</b> Appendix: Exception handling by other parallel map-reduce APIs</a></li>
<li class="chapter" data-level="8.2" data-path="appendix.html"><a href="appendix.html#appendix-condition-handling-by-other-parallel-map-reduce-apis"><i class="fa fa-check"></i><b>8.2</b> Appendix: Condition handling by other parallel map-reduce APIs</a></li>
<li class="chapter" data-level="8.3" data-path="appendix.html"><a href="appendix.html#appendix-standard-output-by-other-parallel-map-reduce-apis"><i class="fa fa-check"></i><b>8.3</b> Appendix: Standard output by other parallel map-reduce APIs</a></li>
<li class="chapter" data-level="8.4" data-path="appendix.html"><a href="appendix.html#appendix-not-everything-can-be-parallelized"><i class="fa fa-check"></i><b>8.4</b> Appendix: Not everything can be parallelized</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="appendix.html"><a href="appendix.html#example-r-connections-can-be-exported-to-parallel-workers"><i class="fa fa-check"></i><b>8.4.1</b> Example: R connections can be exported to parallel workers</a></li>
<li class="chapter" data-level="8.4.2" data-path="appendix.html"><a href="appendix.html#example-xml2-objects-cannot-be-exported"><i class="fa fa-check"></i><b>8.4.2</b> Example: xml2 objects cannot be exported</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="appendix.html"><a href="appendix.html#appendix-careful-with-forked-parallization"><i class="fa fa-check"></i><b>8.5</b> Appendix: Careful with forked parallization</a></li>
<li class="chapter" data-level="8.6" data-path="appendix.html"><a href="appendix.html#appendix-missing-globals"><i class="fa fa-check"></i><b>8.6</b> Appendix: Missing globals</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="appendix.html"><a href="appendix.html#example-glueglue---object-not-found"><i class="fa fa-check"></i><b>8.6.1</b> Example: glue::glue() - object not found</a></li>
<li class="chapter" data-level="8.6.2" data-path="appendix.html"><a href="appendix.html#example-do.call"><i class="fa fa-check"></i><b>8.6.2</b> Example: do.call()</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="appendix.html"><a href="appendix.html#appendix-dont-assign-to-global-environment"><i class="fa fa-check"></i><b>8.7</b> Appendix: Don’t assign to global environment</a></li>
<li class="chapter" data-level="8.8" data-path="appendix.html"><a href="appendix.html#appendix-foreach-is-not-a-for-loop"><i class="fa fa-check"></i><b>8.8</b> Appendix: foreach() is not a for-loop</a></li>
<li class="chapter" data-level="8.9" data-path="appendix.html"><a href="appendix.html#appendix-debugging"><i class="fa fa-check"></i><b>8.9</b> Appendix: Debugging</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tutorial: An Introduction to Futureverse for Parallel Processing in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="errors-and-output" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Part 4</span> Errors and output<a href="errors-and-output.html#errors-and-output" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Whe using the <strong><a href="https://future.futureverse.org">future</a></strong> framework, it’s business as usual:</p>
<ul>
<li>Errors produced in parallel, are relayed as-is in the main R session</li>
<li>Warnings produced in parallel, are relayed as-is in the main R session</li>
<li>Messages produced in parallel, are relayed as-is in the main R session</li>
<li>Any condition produced in parallel, are relayed as-is in the main R session</li>
<li>Standard output produced in parallel, is relayed as-is in the main R session</li>
</ul>
<p>It is only the <strong><a href="https://future.futureverse.org">future</a></strong> framework that does this. Other parallel
framework ignores warnings, messages, and standard output, and they
throw their own custom error when they detect errors.</p>
<div id="business-as-usual-exception-handling-dealing-with-errors" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Business as usual: Exception handling (“dealing with errors”)<a href="errors-and-output.html#business-as-usual-exception-handling-dealing-with-errors" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Errors produced in parallel, are relayed as-is in the main R session</li>
</ul>
<div id="example-setup" class="section level3 hasAnchor" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Example setup<a href="errors-and-output.html#example-setup" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The regular <code>sqrt()</code> function gives a warning if we try with a negative number, e.g.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="errors-and-output.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb58-2"><a href="errors-and-output.html#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] NaN</span></span>
<span id="cb58-3"><a href="errors-and-output.html#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning message:</span></span>
<span id="cb58-4"><a href="errors-and-output.html#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; In sqrt(-1) : NaNs produced</span></span></code></pre></div>
<p>If we want to be more strict, we could define:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="errors-and-output.html#cb59-1" aria-hidden="true" tabindex="-1"></a>strict_sqrt <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb59-2"><a href="errors-and-output.html#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb59-3"><a href="errors-and-output.html#cb59-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;sqrt(x) with x &lt; 0 not allowed: &quot;</span>, x)</span>
<span id="cb59-4"><a href="errors-and-output.html#cb59-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb59-5"><a href="errors-and-output.html#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sqrt</span>(x)</span>
<span id="cb59-6"><a href="errors-and-output.html#cb59-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>which gives:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="errors-and-output.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strict_sqrt</span>(<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb60-2"><a href="errors-and-output.html#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in strict_sqrt(-1) : sqrt(x) with x &lt; 0 not allowed: -1</span></span></code></pre></div>
<p>Let’s see how this behaves with futures:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="errors-and-output.html#cb61-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">future</span>(<span class="fu">strict_sqrt</span>(<span class="sc">-</span><span class="dv">1</span>))</span>
<span id="cb61-2"><a href="errors-and-output.html#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="errors-and-output.html#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">&quot;All good this far&quot;</span>)</span>
<span id="cb61-4"><a href="errors-and-output.html#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; All good this far</span></span>
<span id="cb61-5"><a href="errors-and-output.html#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="errors-and-output.html#cb61-6" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">value</span>(f)</span>
<span id="cb61-7"><a href="errors-and-output.html#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in strict_sqrt(-1) : sqrt(x) with x &lt; 0 not allowed: -1</span></span></code></pre></div>
<p>Note how the error is signalled when we call <code>value()</code> - not when we call <code>future()</code>, which would not be possible because the latter starts the evaluation and returns immediately.</p>
<p>Because of this, regular exception handling applies, e.g.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="errors-and-output.html#cb62-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb62-2"><a href="errors-and-output.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">value</span>(f)</span>
<span id="cb62-3"><a href="errors-and-output.html#cb62-3" aria-hidden="true" tabindex="-1"></a>}, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb62-4"><a href="errors-and-output.html#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;An error occurred: &quot;</span>, <span class="fu">conditionMessage</span>(e))</span>
<span id="cb62-5"><a href="errors-and-output.html#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="cn">NA_real_</span></span>
<span id="cb62-6"><a href="errors-and-output.html#cb62-6" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb62-7"><a href="errors-and-output.html#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; An error occurred: sqrt(x) with x &lt; 0 not allowed: -1</span></span>
<span id="cb62-8"><a href="errors-and-output.html#cb62-8" aria-hidden="true" tabindex="-1"></a>v</span>
<span id="cb62-9"><a href="errors-and-output.html#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span></code></pre></div>
</div>
<div id="exception-handling-works-the-same-with-map-reduce-functions" class="section level3 hasAnchor" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Exception handling works the same with map-reduce functions<a href="errors-and-output.html#exception-handling-works-the-same-with-map-reduce-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s see how this behaves with different map-reduce functions. If we use it with base R map-reduce functions, errors are produced like:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="errors-and-output.html#cb63-1" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb63-2"><a href="errors-and-output.html#cb63-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">lapply</span>(X, strict_sqrt)</span>
<span id="cb63-3"><a href="errors-and-output.html#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in FUN(X[[i]], ...) : sqrt(x) with x &lt; 0 not allowed: -1</span></span></code></pre></div>
<p>We get a similar behavior with <strong><a href="https://future.apply.futureverse.org">future.apply</a></strong>:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="errors-and-output.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(future.apply)</span>
<span id="cb64-2"><a href="errors-and-output.html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(multisession, <span class="at">workers =</span> <span class="dv">2</span>)</span>
<span id="cb64-3"><a href="errors-and-output.html#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="errors-and-output.html#cb64-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">future_lapply</span>(X, strict_sqrt)</span>
<span id="cb64-5"><a href="errors-and-output.html#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in ...future.FUN(...future.X_jj, ...) : </span></span>
<span id="cb64-6"><a href="errors-and-output.html#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   sqrt(x) with x &lt; 0 not allowed: -1</span></span></code></pre></div>
<p>and <strong><a href="https://furrr.futureverse.org">furrr</a></strong>:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="errors-and-output.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(furrr)</span>
<span id="cb65-2"><a href="errors-and-output.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(multisession, <span class="at">workers =</span> <span class="dv">2</span>)</span>
<span id="cb65-3"><a href="errors-and-output.html#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="errors-and-output.html#cb65-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">future_map</span>(X, strict_sqrt)</span>
<span id="cb65-5"><a href="errors-and-output.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in ...furrr_fn(...) : sqrt(x) with x &lt; 0 not allowed: -1</span></span></code></pre></div>
<p>Take-home message: You can treat errors the same way as when running sequentially.</p>
<p>See Appendix <a href="appendix.html#appendix-exception-handling-by-other-parallel-map-reduce-apis">Exception handling by other parallel map-reduce APIs</a> for a comparison with other parallel solutions that does not rely on future-based, and for why the future solution is often more natural.</p>
</div>
</div>
<div id="business-as-usual-warnings" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Business as usual: Warnings<a href="errors-and-output.html#business-as-usual-warnings" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Warnings produced in parallel, are relayed as-is in the main R session</li>
</ul>
<p>When you use <code>warning()</code>, the warning message is signalled as a <code>warning</code> condition, very similar to how errors are signalled as <code>error</code> conditions. For example,</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="errors-and-output.html#cb66-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb66-2"><a href="errors-and-output.html#cb66-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">log</span>(x)</span>
<span id="cb66-3"><a href="errors-and-output.html#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning message:</span></span>
<span id="cb66-4"><a href="errors-and-output.html#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; In log(x) : NaNs produced</span></span></code></pre></div>
<p>Futures capture <code>warning</code> conditions, which then are re-signalled by <code>value()</code>, e.g.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="errors-and-output.html#cb67-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb67-2"><a href="errors-and-output.html#cb67-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">future</span>(<span class="fu">log</span>(x))</span>
<span id="cb67-3"><a href="errors-and-output.html#cb67-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">value</span>(f)</span>
<span id="cb67-4"><a href="errors-and-output.html#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning message:</span></span>
<span id="cb67-5"><a href="errors-and-output.html#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; In log(x) : NaNs produced</span></span></code></pre></div>
<p>We can suppress warning using <code>suppressWarnings()</code>. This works the same way regardless whether futures are used or not. For example,</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="errors-and-output.html#cb68-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">value</span>(f)</span>
<span id="cb68-2"><a href="errors-and-output.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning message:</span></span>
<span id="cb68-3"><a href="errors-and-output.html#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; In log(x) : NaNs produced</span></span>
<span id="cb68-4"><a href="errors-and-output.html#cb68-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-5"><a href="errors-and-output.html#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressWarnings</span>(y <span class="ot">&lt;-</span> <span class="fu">value</span>(f))</span></code></pre></div>
<p>One can handle <code>warning</code> conditions using <code>withCallingHandlers()</code> and <code>globalCallingHandlers()</code> for maximum control what to do with them, but that’s beyond this tutorial.</p>
<p>Just like errors, <strong><a href="https://future.futureverse.org">future</a></strong> map-reduce functions handles warnings consistently, e.g.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="errors-and-output.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(future.apply)</span>
<span id="cb69-2"><a href="errors-and-output.html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(multisession, <span class="at">workers =</span> <span class="dv">2</span>)</span>
<span id="cb69-3"><a href="errors-and-output.html#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="errors-and-output.html#cb69-4" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb69-5"><a href="errors-and-output.html#cb69-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">future_lapply</span>(X, sqrt)</span>
<span id="cb69-6"><a href="errors-and-output.html#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning message:</span></span>
<span id="cb69-7"><a href="errors-and-output.html#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; In ...future.FUN(...future.X_jj, ...) : NaNs produced</span></span>
<span id="cb69-8"><a href="errors-and-output.html#cb69-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(y)</span>
<span id="cb69-9"><a href="errors-and-output.html#cb69-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 4</span></span>
<span id="cb69-10"><a href="errors-and-output.html#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num NaN</span></span>
<span id="cb69-11"><a href="errors-and-output.html#cb69-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num 0</span></span>
<span id="cb69-12"><a href="errors-and-output.html#cb69-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num 1</span></span>
<span id="cb69-13"><a href="errors-and-output.html#cb69-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num 1.41</span></span></code></pre></div>
<p>Take-home message: You can treat warnings the same way as when running sequentially.</p>
<p>See Appendix <a href="appendix.html#appendix-condition-handling-by-other-parallel-map-reduce-apis">Condition handling by other parallel map-reduce APIs</a> for a comparison with other parallel solutions. The future framework is the only solution where it works.</p>
</div>
<div id="business-as-usual-messages" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Business as usual: Messages<a href="errors-and-output.html#business-as-usual-messages" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Messages produced in parallel, are relayed as-is in the main R session</li>
</ul>
<p>When you use <code>message()</code>, the message are signalled the same way warnings and errors are signalled, and they eventually end up in the <em>standard error</em> (stderr) stream - <em>not</em> outputted to the standard output (stdout) stream. For example,</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="errors-and-output.html#cb70-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>]</span>
<span id="cb70-2"><a href="errors-and-output.html#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">&quot;Number of letters: &quot;</span>, <span class="fu">length</span>(z))</span>
<span id="cb70-3"><a href="errors-and-output.html#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Number of letters: 8</span></span></code></pre></div>
<p>As with warnings and errors, futures capture <code>message</code> conditions, which then are re-signalled by <code>value()</code>, e.g.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="errors-and-output.html#cb71-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">future</span>({</span>
<span id="cb71-2"><a href="errors-and-output.html#cb71-2" aria-hidden="true" tabindex="-1"></a>  z <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>]</span>
<span id="cb71-3"><a href="errors-and-output.html#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Number of letters: &quot;</span>, <span class="fu">length</span>(z))</span>
<span id="cb71-4"><a href="errors-and-output.html#cb71-4" aria-hidden="true" tabindex="-1"></a>  z</span>
<span id="cb71-5"><a href="errors-and-output.html#cb71-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb71-6"><a href="errors-and-output.html#cb71-6" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">value</span>(f)</span>
<span id="cb71-7"><a href="errors-and-output.html#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Number of letters: 8</span></span>
<span id="cb71-8"><a href="errors-and-output.html#cb71-8" aria-hidden="true" tabindex="-1"></a>y</span>
<span id="cb71-9"><a href="errors-and-output.html#cb71-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot;</span></span></code></pre></div>
<p>We can suppress messages using <code>suppressMessages()</code>. This works the same way regardless whether futures are used or not. For example,</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="errors-and-output.html#cb72-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">value</span>(f)</span>
<span id="cb72-2"><a href="errors-and-output.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Number of letters: 8</span></span>
<span id="cb72-3"><a href="errors-and-output.html#cb72-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a href="errors-and-output.html#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressMessages</span>(y <span class="ot">&lt;-</span> <span class="fu">value</span>(f))</span></code></pre></div>
<p>Just like for warnings and errors, <strong><a href="https://future.futureverse.org">future</a></strong> map-reduce functions handles messages consistently, e.g.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="errors-and-output.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(future.apply)</span>
<span id="cb73-2"><a href="errors-and-output.html#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(multisession, <span class="at">workers =</span> <span class="dv">2</span>)</span>
<span id="cb73-3"><a href="errors-and-output.html#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="errors-and-output.html#cb73-4" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb73-5"><a href="errors-and-output.html#cb73-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">future_lapply</span>(X, <span class="cf">function</span>(x) <span class="fu">message</span>(<span class="st">&quot;x = &quot;</span>, x))</span>
<span id="cb73-6"><a href="errors-and-output.html#cb73-6" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb73-7"><a href="errors-and-output.html#cb73-7" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb73-8"><a href="errors-and-output.html#cb73-8" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">3</span></span></code></pre></div>
<p>One can handle <code>message</code> conditions using <code>withCallingHandlers()</code> and <code>globalCallingHandlers()</code> for maximum control what to do with them, but that’s beyond this tutorial.</p>
<p>Take-home message: You can treat messages the same way as when running sequentially.</p>
<p>See Appendix <a href="appendix.html#appendix-condition-handling-by-other-parallel-map-reduce-apis">Condition handling by other parallel map-reduce APIs</a> for a comparison with other parallel solutions. The future framework is the only solution where it works.</p>
</div>
<div id="business-as-usual-standard-output" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Business as usual: Standard output<a href="errors-and-output.html#business-as-usual-standard-output" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Standard output produced in parallel, is relayed as-is in the main R session</li>
</ul>
<p>When you use <code>cat()</code>, <code>print()</code>, and <code>str()</code>, the message string is (by default) outputted to the <em>standard output</em> (stdout) stream. Note that this does <em>not</em> rely on R’s condition system, so use a completely different infrastructure than <code>message()</code>.</p>
<p>For example,</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="errors-and-output.html#cb74-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>]</span>
<span id="cb74-2"><a href="errors-and-output.html#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Number of letters:&quot;</span>, <span class="fu">length</span>(z), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb74-3"><a href="errors-and-output.html#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Number of letters: 8</span></span></code></pre></div>
<p>When using futures, any standard output is automatically captured and re-outputted by <code>value()</code>, e.g.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="errors-and-output.html#cb75-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">future</span>({</span>
<span id="cb75-2"><a href="errors-and-output.html#cb75-2" aria-hidden="true" tabindex="-1"></a>  z <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>]</span>
<span id="cb75-3"><a href="errors-and-output.html#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Number of letters:&quot;</span>, <span class="fu">length</span>(z), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb75-4"><a href="errors-and-output.html#cb75-4" aria-hidden="true" tabindex="-1"></a>  z</span>
<span id="cb75-5"><a href="errors-and-output.html#cb75-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb75-6"><a href="errors-and-output.html#cb75-6" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">value</span>(f)</span>
<span id="cb75-7"><a href="errors-and-output.html#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Number of letters: 8</span></span>
<span id="cb75-8"><a href="errors-and-output.html#cb75-8" aria-hidden="true" tabindex="-1"></a>y</span>
<span id="cb75-9"><a href="errors-and-output.html#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot;</span></span></code></pre></div>
<p>Just like you can use <code>utils::capture.output()</code> to capture standard output from <code>cat()</code>, <code>print()</code>, <code>str()</code>, …, you can use it to capture the output relayed by <code>value()</code>. For example,</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="errors-and-output.html#cb76-1" aria-hidden="true" tabindex="-1"></a>stdout <span class="ot">&lt;-</span> <span class="fu">capture.output</span>({</span>
<span id="cb76-2"><a href="errors-and-output.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="fu">value</span>(f)</span>
<span id="cb76-3"><a href="errors-and-output.html#cb76-3" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb76-4"><a href="errors-and-output.html#cb76-4" aria-hidden="true" tabindex="-1"></a>y</span>
<span id="cb76-5"><a href="errors-and-output.html#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot;</span></span>
<span id="cb76-6"><a href="errors-and-output.html#cb76-6" aria-hidden="true" tabindex="-1"></a>stdout</span>
<span id="cb76-7"><a href="errors-and-output.html#cb76-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Number of letters: 8 &quot;</span></span></code></pre></div>
<p>We can suppress standard output using <code>capture.output(..., file = nullfile())</code>. This works the same way regardless whether futures are used or not. For example,</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="errors-and-output.html#cb77-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">value</span>(f)</span>
<span id="cb77-2"><a href="errors-and-output.html#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Number of letters: 8</span></span>
<span id="cb77-3"><a href="errors-and-output.html#cb77-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-4"><a href="errors-and-output.html#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="fu">capture.output</span>(y <span class="ot">&lt;-</span> <span class="fu">value</span>(f), <span class="at">file =</span> <span class="fu">nullfile</span>())</span></code></pre></div>
<p>Just like for conditions, <strong><a href="https://future.futureverse.org">future</a></strong> map-reduce functions handles standard ouput consistently, e.g.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="errors-and-output.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(future.apply)</span>
<span id="cb78-2"><a href="errors-and-output.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(multisession, <span class="at">workers =</span> <span class="dv">2</span>)</span>
<span id="cb78-3"><a href="errors-and-output.html#cb78-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-4"><a href="errors-and-output.html#cb78-4" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb78-5"><a href="errors-and-output.html#cb78-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">future_lapply</span>(X, <span class="cf">function</span>(x) <span class="fu">cat</span>(<span class="st">&quot;x =&quot;</span>, x, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>))</span>
<span id="cb78-6"><a href="errors-and-output.html#cb78-6" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb78-7"><a href="errors-and-output.html#cb78-7" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb78-8"><a href="errors-and-output.html#cb78-8" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">3</span></span></code></pre></div>
<p>Take-home message: You can treat output the same way as when running sequentially.</p>
<p>See Appendix <a href="appendix.html#appendix-standard-output-by-other-parallel-map-reduce-apis">Standard output by other parallel map-reduce APIs</a> for a comparison with other parallel solutions that does not rely on future-based. The future-based solutions are the only ones that work correctly.</p>
</div>
<div id="summary-all-types-of-output-is-relayed" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Summary: All types of output is relayed<a href="errors-and-output.html#summary-all-types-of-output-is-relayed" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Above, we’ve learned how <code>message</code>, <code>warning</code>, and <code>error</code> conditions are relayed. This is actually true for all other classes of conditions. We also learned that output sent to the standard output is relayed by futures.</p>
<p>Here is a final example where we use most types of output:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="errors-and-output.html#cb79-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">future</span>({</span>
<span id="cb79-2"><a href="errors-and-output.html#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Hello world</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb79-3"><a href="errors-and-output.html#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Hi there&quot;</span>)</span>
<span id="cb79-4"><a href="errors-and-output.html#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">warning</span>(<span class="st">&quot;whoops!&quot;</span>)</span>
<span id="cb79-5"><a href="errors-and-output.html#cb79-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Please wait ...&quot;</span>)</span>
<span id="cb79-6"><a href="errors-and-output.html#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span>(<span class="st">&quot;a&quot;</span>)</span>
<span id="cb79-7"><a href="errors-and-output.html#cb79-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Done&quot;</span>)</span>
<span id="cb79-8"><a href="errors-and-output.html#cb79-8" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb79-9"><a href="errors-and-output.html#cb79-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-10"><a href="errors-and-output.html#cb79-10" aria-hidden="true" tabindex="-1"></a><span class="fu">value</span>(f)</span>
<span id="cb79-11"><a href="errors-and-output.html#cb79-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Hello world</span></span>
<span id="cb79-12"><a href="errors-and-output.html#cb79-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Hi there</span></span>
<span id="cb79-13"><a href="errors-and-output.html#cb79-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Please wait ...</span></span>
<span id="cb79-14"><a href="errors-and-output.html#cb79-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in log(&quot;a&quot;) : non-numeric argument to mathematical function</span></span>
<span id="cb79-15"><a href="errors-and-output.html#cb79-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; In addition: Warning message:</span></span>
<span id="cb79-16"><a href="errors-and-output.html#cb79-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; In withCallingHandlers({ : whoops!</span></span></code></pre></div>
</div>
<div id="odds-and-ends" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Odds and ends<a href="errors-and-output.html#odds-and-ends" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="what-about-standard-error-stderr" class="section level3 hasAnchor" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> What about standard error (stderr)?<a href="errors-and-output.html#what-about-standard-error-stderr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R’s support for capturing standard error (stderr) output is poor. It can be done using:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="errors-and-output.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">capture.output</span>(..., <span class="at">type =</span> <span class="st">&quot;message&quot;</span>)</span></code></pre></div>
<p>However, I strongly advise against using it. The reason is that <code>capture.output(..., type = "message")</code> cannot be nested, and the most recent call will always trump any existing stderr captures. That is, if you capture standard error this way and call a function that does the same, the latter hijacks all capturing. <em>Importantly</em>, when it returns, remaining output to standard error will no longer be captured, despite your having requested it previously. For more details, see <a href="https://github.com/HenrikBengtsson/Wishlist-for-R/issues/55" class="uri">https://github.com/HenrikBengtsson/Wishlist-for-R/issues/55</a>.</p>
<p><em>Conclusion:</em> Always avoid <code>capture.output(..., type = "message")</code>, and never ever use it in package code!</p>
<p><em>Warning: Above <code>type = "message"</code> should not be mistaken for <code>message()</code>. A more informative value would have been <code>type = "stderr"</code>.</em></p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="map-reduce-apis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reporting-on-progress-updates.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
